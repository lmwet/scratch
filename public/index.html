<!doctype html>
<html>
<head>
    <title>Sketch Scratch</title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="icon" href="https://s3.amazonaws.com/spicedling/DbkUWZizPDUpQuszsQ9HA3k9eLES-3qj.png" type="image/x-icon"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<body>

    <div id='main'>
        

<!-- <h3 style="color: pink" v-if='seen'>Hallouu it meeey</h3>
<h3 v-else> no its mey</h3> -->
        <h2>
            {{name.toUpperCase()}}
        </h2>

        <form id='main-form'>
            <input @change='handleChange' type="file" name='file' class="inputfile" id='file' accept='image/*'>
            <input v-model='title' type="text" name='title' placeholder='title'>
            <input v-model='description' type="text" name='description' id='description' placeholder='description'>
            <input v-model='username' type="text" name='username' placeholder='username'>
            <!-- <input type="hidden" name="_csrf" value="{{csrfToken}}"> -->
            <button id="upload" @click='handleClick'>Upload</button>
        </form>

        <div class="container" >
            <li v-for='image in images' :key="images.id" class="card">
                <a :href="'#' + image.id">
            <img class="small" :src="image.url">
        </a>
            <p class="title">{{image.title}}</p>
            <p class="username">by {{image.username}}</p>
        </li>
        </div>
        <button @click='grabMore'id="more">More</button>


<image-modal 
    v-if="imageId" :id='imageId'
    @pleaseclosemodal='closemodal'></image-modal> 

    </div> 
    <!-- closes main el -->

<!-- template script should be outside the vue element (main) -->
  <script id="tmpl" type="text/x-template">

    <div id="modal" class="modal">

        <div class="modal-container">
                <span @click="pleaseclosemodal" class="close">&times;</span>

                    <!-- image-block -->
                    <div :id="imageInfos" class="image-info-block">
                    <img :id="imageInfos.id" :src="imageInfos.url" :alt="imageInfos.description" class="large" />  
                    <button @click='deleteImage' id="delete"><i style="font-size:24px" class="fa"> &#xf014;</i></button>
                    <h3>{{imageInfos.title}}</h3>
                    <em id="image-username">by {{imageInfos.username}}</em>
                    <p id="image-description">{{imageInfos.description}}</p>
                    </div>

                      <!--comments-block -->
                <form id="comment-form">
                    <input v-model='comment' type="text" name='comment' id="comment-field" placeholder='your comment'>
                    <input v-model='username' type="username" name='username' id="user-field" placeholder='username'>
                    <!-- <input type="hidden" name="_csrf" value="{{csrfToken}}"> -->
                    <button @click='handleCommentClick'>Submit</button>
                </form>


                    <div  v-for='comment in comments' :key="comment.created_at" class="comment">
                    <p :id=comment>{{comment.comment}}</p>
                    <span :id="username">{{comment.username}}</span><span :id="created_at">  {{comment.created_at}}</span>
                    </div>
        </div>
  
    </div>
    
    </script>

    <script src="/js/vue.js"></script>
    <script src="/js/axios.min.js"></script>
    <script src="/js/script.js"></script>
    <script src="./index.js"></script>
    <script src="js/image-modal.js"></script>
</body>
</html>